{"version":3,"sources":["node_modules/browser-pack/_prelude.js","Scripts/Utilities/DomUtil.ts","Scripts/Utilities/HtmlLoader.ts","Scripts/Utilities/MakeRequest.ts","Scripts/Utilities/UrlUtil.ts","Scripts/main.ts","node_modules/tingle.js/dist/tingle.min.js"],"names":[],"mappings":"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","file":"site.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","ï»¿export default class DomUtil {\n\telement: Element;\n\tconstructor(element: Element) {\n\t\tthis.element = element;\n\t}\n\n\tgetDataAttr(attr: string, defaultvalue: string = undefined): any {\n\t\tif (!this.element) return null;\n\t\tconst value = this.element.getAttribute(`data-${attr}`);\n\n\t\treturn value !== undefined ? value : defaultvalue;\n\t}\n\n\tsetDataAttr(attr: string, value: string): any {\n\t\tif (!this.element) return null;\n\t\treturn this.element.setAttribute(`data-${attr}`, value);\n\t}\n\n\tgetAttr(attr: string, defaultvalue: string = undefined): any {\n\t\tif (!this.element) return null;\n\t\tconst value = this.element.getAttribute(attr)\n\n\t\treturn value !== undefined ? value : defaultvalue;\n\t}\n\n\tsetAttr(attr: string, value: string): void {\n\t\tif (!this.element) return null;\n\t\tthis.element.setAttribute(attr, value);\n\t}\n\n\tremoveAttr(attr: string): void {\n\t\tif (!this.element) return null;\n\t\tthis.element.removeAttribute(attr);\n\t}\n\n\thasAttr(attr: string): boolean {\n\t\tif (!this.element) return null;\n\t\treturn this.element.hasAttribute(attr);\n\t}\n\n\tshake(): void {\n\t\tthis.appendClass(\"shake\");\n\t\tsetTimeout(() => {\n\t\t\tthis.removeClass(\"shake\");\n\t\t\t(this.element as HTMLInputElement).readOnly = false;\n\t\t}, 300);\n\t}\n\n\tremoveClass(classname) {\n\t\tthis.element.classList.remove(classname);\n\t}\n\n\tappendClass(classname) {\n\t\tthis.element.classList.add(classname);\n\t}\n}\n","\nexport default class HtmlLoader {\n    targetElement: HTMLElement;\n\n    constructor(queryString: string) {\n        this.targetElement = document.querySelector(queryString);\n    }\n\n    load(url: string, method: string = \"get\") {\n        if (!this.targetElement) {\n            throw new Error(\"missing target element\");\n        }\n\n        const xmlHttpRequest = new XMLHttpRequest();\n\n        xmlHttpRequest.onreadystatechange = () => {\n            if (xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200) {\n                this.targetElement.innerHTML = xmlHttpRequest.responseText;\n            }\n        };\n\n        xmlHttpRequest.open(method, url, true);\n        xmlHttpRequest.send();\n    }\n}","\nexport default class MakeRequest {\n    method: string;\n    url: string;\n    constructor(url: string, method: string = \"get\") {\n        this.method = method;\n        this.url = url;\n    }\n\n    send() {\n        return new Promise((resolve, reject) => {\n            const xmlHttpRequest = new XMLHttpRequest();\n            xmlHttpRequest.open(this.method, this.url);\n            xmlHttpRequest.onload = () => {\n                if (xmlHttpRequest.status >= 200 && xmlHttpRequest.status < 300) {\n                    resolve(xmlHttpRequest.response);\n                } else {\n                    reject({\n                        status: xmlHttpRequest.status,\n                        statusText: xmlHttpRequest.statusText\n                    });\n                }\n            };\n            xmlHttpRequest.onerror = () => {\n                reject({\n                    status: xmlHttpRequest.status,\n                    statusText: xmlHttpRequest.statusText\n                });\n            };\n            xmlHttpRequest.send();\n        });\n    }\n}\n","export default class UrlUtil {\n    constructor() {\n    }\n\n    queryValue: Function = (field: string, url?: string): string => {\n        var href: string = url ? url : window.location.href;\n        var reg: RegExp = new RegExp('[?&]' + field + '=([^&#]*)', 'i');\n        var string: string[] = reg.exec(href);\n        return string ? string[1].toLowerCase() : null;\n    };\n\n    currentURL: Function = (): string => window.location.href;\n\n    getURLParameters: Function = (url: string): any =>\n        (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce((a, v) =>\n            ((a[v.slice(0, v.indexOf(\"=\"))] = v.slice(v.indexOf(\"=\") + 1)), a), {});\n\n    redirect: Function = (url, asLink = true): void => asLink ? (window.location.href = url) : window.location.replace(\n        url);\n\n    baseUrl: Function = (): string => window.location.origin;\n\n    host: Function = (): string => window.location.host;\n\n    pathArray: Function = (): string[] => window.location.pathname.split('/');\n}\n","import DomUtil from \"./Utilities/DomUtil\";\nimport UrlUtil from \"./Utilities/UrlUtil\";\nimport HtmlLoader from \"./Utilities/HtmlLoader\";\nimport * as tingle from \"tingle.js\";\nimport MakeRequest from \"./Utilities/MakeRequest\";\n\nexport default class App {\n    constructor() {\n    }\n\n    execute() {\n        try {\n            this.setListeners()\n        } catch (error) {\n        }\n    }\n\n    setListeners() {\n        var usersRows = document.querySelectorAll('.user');\n        [].slice\n            .call(usersRows)\n            .forEach((element: Element, index: number, array: HTMLElement[]) => {\n                element.addEventListener(\n                    \"click\",\n                    () => {\n                        const domUtil = new DomUtil(element);\n                        const urlUtil = new UrlUtil();\n                        const userId = domUtil.getDataAttr('userid');\n                        const userUrl = `${urlUtil.baseUrl()}/api/modal/user?id=${userId}`;\n                        new HtmlLoader('#userModal').load(userUrl);\n                        new MakeRequest(userUrl)\n                            .send()\n                            .then((data) => {\n                                const modal = new tingle.modal({\n                                    footer: true,\n                                    stickyFooter: false,\n                                    closeMethods: ['overlay', 'button', 'escape'],\n                                    closeLabel: \"Close\",\n                                    cssClass: ['custom-class-1', 'custom-class-2'],\n                                    beforeClose: () => true\n                                });\n                                modal.setContent(data);\n                                modal.open();\n                            })\n                            .catch((err) => {\n                                console.error('Augh, there was an error!', err.statusText);\n                            });\n\n                    },\n                    false\n                );\n            });\n    }\n}\n\ndocument.onreadystatechange = () => {\n    if (document.readyState == \"interactive\") {\n        new App().execute();\n    }\n};\n","!function(t,o){\"function\"==typeof define&&define.amd?define(o):\"object\"==typeof exports?module.exports=o():t.tingle=o()}(this,function(){function t(t){var o={onClose:null,onOpen:null,beforeOpen:null,beforeClose:null,stickyFooter:!1,footer:!1,cssClass:[],closeLabel:\"Close\",closeMethods:[\"overlay\",\"button\",\"escape\"]};this.opts=r({},o,t),this.init()}function o(){this.modalBoxFooter&&(this.modalBoxFooter.style.width=this.modalBox.clientWidth+\"px\",this.modalBoxFooter.style.left=this.modalBox.offsetLeft+\"px\")}function e(){this.modal=document.createElement(\"div\"),this.modal.classList.add(\"tingle-modal\"),0!==this.opts.closeMethods.length&&-1!==this.opts.closeMethods.indexOf(\"overlay\")||this.modal.classList.add(\"tingle-modal--noOverlayClose\"),this.modal.style.display=\"none\",this.opts.cssClass.forEach(function(t){\"string\"==typeof t&&this.modal.classList.add(t)},this),-1!==this.opts.closeMethods.indexOf(\"button\")&&(this.modalCloseBtn=document.createElement(\"button\"),this.modalCloseBtn.type=\"button\",this.modalCloseBtn.classList.add(\"tingle-modal__close\"),this.modalCloseBtnIcon=document.createElement(\"span\"),this.modalCloseBtnIcon.classList.add(\"tingle-modal__closeIcon\"),this.modalCloseBtnIcon.innerHTML=\"Ã\",this.modalCloseBtnLabel=document.createElement(\"span\"),this.modalCloseBtnLabel.classList.add(\"tingle-modal__closeLabel\"),this.modalCloseBtnLabel.innerHTML=this.opts.closeLabel,this.modalCloseBtn.appendChild(this.modalCloseBtnIcon),this.modalCloseBtn.appendChild(this.modalCloseBtnLabel)),this.modalBox=document.createElement(\"div\"),this.modalBox.classList.add(\"tingle-modal-box\"),this.modalBoxContent=document.createElement(\"div\"),this.modalBoxContent.classList.add(\"tingle-modal-box__content\"),this.modalBox.appendChild(this.modalBoxContent),-1!==this.opts.closeMethods.indexOf(\"button\")&&this.modal.appendChild(this.modalCloseBtn),this.modal.appendChild(this.modalBox)}function s(){this.modalBoxFooter=document.createElement(\"div\"),this.modalBoxFooter.classList.add(\"tingle-modal-box__footer\"),this.modalBox.appendChild(this.modalBoxFooter)}function i(){this._events={clickCloseBtn:this.close.bind(this),clickOverlay:l.bind(this),resize:this.checkOverflow.bind(this),keyboardNav:n.bind(this)},-1!==this.opts.closeMethods.indexOf(\"button\")&&this.modalCloseBtn.addEventListener(\"click\",this._events.clickCloseBtn),this.modal.addEventListener(\"mousedown\",this._events.clickOverlay),window.addEventListener(\"resize\",this._events.resize),document.addEventListener(\"keydown\",this._events.keyboardNav)}function n(t){-1!==this.opts.closeMethods.indexOf(\"escape\")&&27===t.which&&this.isOpen()&&this.close()}function l(t){-1!==this.opts.closeMethods.indexOf(\"overlay\")&&!d(t.target,\"tingle-modal\")&&t.clientX<this.modal.clientWidth&&this.close()}function d(t,o){for(;(t=t.parentElement)&&!t.classList.contains(o););return t}function a(){-1!==this.opts.closeMethods.indexOf(\"button\")&&this.modalCloseBtn.removeEventListener(\"click\",this._events.clickCloseBtn),this.modal.removeEventListener(\"mousedown\",this._events.clickOverlay),window.removeEventListener(\"resize\",this._events.resize),document.removeEventListener(\"keydown\",this._events.keyboardNav)}function r(){for(var t=1;t<arguments.length;t++)for(var o in arguments[t])arguments[t].hasOwnProperty(o)&&(arguments[0][o]=arguments[t][o]);return arguments[0]}var h=function(){var t,o=document.createElement(\"tingle-test-transition\"),e={transition:\"transitionend\",OTransition:\"oTransitionEnd\",MozTransition:\"transitionend\",WebkitTransition:\"webkitTransitionEnd\"};for(t in e)if(void 0!==o.style[t])return e[t]}(),c=!1;return t.prototype.init=function(){if(!this.modal)return e.call(this),i.call(this),document.body.insertBefore(this.modal,document.body.firstChild),this.opts.footer&&this.addFooter(),this},t.prototype._busy=function(t){c=t},t.prototype._isBusy=function(){return c},t.prototype.destroy=function(){null!==this.modal&&(this.isOpen()&&this.close(!0),a.call(this),this.modal.parentNode.removeChild(this.modal),this.modal=null)},t.prototype.isOpen=function(){return!!this.modal.classList.contains(\"tingle-modal--visible\")},t.prototype.open=function(){if(!this._isBusy()){this._busy(!0);var t=this;return\"function\"==typeof t.opts.beforeOpen&&t.opts.beforeOpen(),this.modal.style.removeProperty?this.modal.style.removeProperty(\"display\"):this.modal.style.removeAttribute(\"display\"),this._scrollPosition=window.pageYOffset,document.body.classList.add(\"tingle-enabled\"),document.body.style.top=-this._scrollPosition+\"px\",this.setStickyFooter(this.opts.stickyFooter),this.modal.classList.add(\"tingle-modal--visible\"),h?this.modal.addEventListener(h,function o(){\"function\"==typeof t.opts.onOpen&&t.opts.onOpen.call(t),t.modal.removeEventListener(h,o,!1),t._busy(!1)},!1):(\"function\"==typeof t.opts.onOpen&&t.opts.onOpen.call(t),t._busy(!1)),this.checkOverflow(),this}},t.prototype.close=function(t){if(!this._isBusy()){if(this._busy(!0),t=t||!1,\"function\"==typeof this.opts.beforeClose){if(!this.opts.beforeClose.call(this))return}document.body.classList.remove(\"tingle-enabled\"),window.scrollTo(0,this._scrollPosition),document.body.style.top=null,this.modal.classList.remove(\"tingle-modal--visible\");var o=this;t?(o.modal.style.display=\"none\",\"function\"==typeof o.opts.onClose&&o.opts.onClose.call(this),o._busy(!1)):h?this.modal.addEventListener(h,function t(){o.modal.removeEventListener(h,t,!1),o.modal.style.display=\"none\",\"function\"==typeof o.opts.onClose&&o.opts.onClose.call(this),o._busy(!1)},!1):(o.modal.style.display=\"none\",\"function\"==typeof o.opts.onClose&&o.opts.onClose.call(this),o._busy(!1))}},t.prototype.setContent=function(t){return\"string\"==typeof t?this.modalBoxContent.innerHTML=t:(this.modalBoxContent.innerHTML=\"\",this.modalBoxContent.appendChild(t)),this.isOpen()&&this.checkOverflow(),this},t.prototype.getContent=function(){return this.modalBoxContent},t.prototype.addFooter=function(){return s.call(this),this},t.prototype.setFooterContent=function(t){return this.modalBoxFooter.innerHTML=t,this},t.prototype.getFooterContent=function(){return this.modalBoxFooter},t.prototype.setStickyFooter=function(t){return this.isOverflow()||(t=!1),t?this.modalBox.contains(this.modalBoxFooter)&&(this.modalBox.removeChild(this.modalBoxFooter),this.modal.appendChild(this.modalBoxFooter),this.modalBoxFooter.classList.add(\"tingle-modal-box__footer--sticky\"),o.call(this),this.modalBoxContent.style[\"padding-bottom\"]=this.modalBoxFooter.clientHeight+20+\"px\"):this.modalBoxFooter&&(this.modalBox.contains(this.modalBoxFooter)||(this.modal.removeChild(this.modalBoxFooter),this.modalBox.appendChild(this.modalBoxFooter),this.modalBoxFooter.style.width=\"auto\",this.modalBoxFooter.style.left=\"\",this.modalBoxContent.style[\"padding-bottom\"]=\"\",this.modalBoxFooter.classList.remove(\"tingle-modal-box__footer--sticky\"))),this},t.prototype.addFooterBtn=function(t,o,e){var s=document.createElement(\"button\");return s.innerHTML=t,s.addEventListener(\"click\",e),\"string\"==typeof o&&o.length&&o.split(\" \").forEach(function(t){s.classList.add(t)}),this.modalBoxFooter.appendChild(s),s},t.prototype.resize=function(){console.warn(\"Resize is deprecated and will be removed in version 1.0\")},t.prototype.isOverflow=function(){var t=window.innerHeight;return this.modalBox.clientHeight>=t},t.prototype.checkOverflow=function(){this.modal.classList.contains(\"tingle-modal--visible\")&&(this.isOverflow()?this.modal.classList.add(\"tingle-modal--overflow\"):this.modal.classList.remove(\"tingle-modal--overflow\"),!this.isOverflow()&&this.opts.stickyFooter?this.setStickyFooter(!1):this.isOverflow()&&this.opts.stickyFooter&&(o.call(this),this.setStickyFooter(!0)))},{modal:t}});"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJTY3JpcHRzL1V0aWxpdGllcy9Eb21VdGlsLnRzIiwiU2NyaXB0cy9VdGlsaXRpZXMvSHRtbExvYWRlci50cyIsIlNjcmlwdHMvVXRpbGl0aWVzL01ha2VSZXF1ZXN0LnRzIiwiU2NyaXB0cy9VdGlsaXRpZXMvVXJsVXRpbC50cyIsIlNjcmlwdHMvbWFpbi50cyIsIm5vZGVfbW9kdWxlcy90aW5nbGUuanMvZGlzdC90aW5nbGUubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7O0lDQXNCLE87OztBQUVyQixtQkFBWSxPQUFaLEVBQTRCO0FBQUE7O0FBQzNCLFNBQUssT0FBTCxHQUFlLE9BQWY7QUFDQTs7OztnQ0FFVyxJLEVBQThDO0FBQUEsVUFBaEMsWUFBZ0MsdUVBQVQsU0FBUztBQUN6RCxVQUFJLENBQUMsS0FBSyxPQUFWLEVBQW1CLE9BQU8sSUFBUDtBQUNuQixVQUFNLEtBQUssR0FBRyxLQUFLLE9BQUwsQ0FBYSxZQUFiLGdCQUFrQyxJQUFsQyxFQUFkO0FBRUEsYUFBTyxLQUFLLEtBQUssU0FBVixHQUFzQixLQUF0QixHQUE4QixZQUFyQztBQUNBOzs7Z0NBRVcsSSxFQUFjLEssRUFBYTtBQUN0QyxVQUFJLENBQUMsS0FBSyxPQUFWLEVBQW1CLE9BQU8sSUFBUDtBQUNuQixhQUFPLEtBQUssT0FBTCxDQUFhLFlBQWIsZ0JBQWtDLElBQWxDLEdBQTBDLEtBQTFDLENBQVA7QUFDQTs7OzRCQUVPLEksRUFBOEM7QUFBQSxVQUFoQyxZQUFnQyx1RUFBVCxTQUFTO0FBQ3JELFVBQUksQ0FBQyxLQUFLLE9BQVYsRUFBbUIsT0FBTyxJQUFQO0FBQ25CLFVBQU0sS0FBSyxHQUFHLEtBQUssT0FBTCxDQUFhLFlBQWIsQ0FBMEIsSUFBMUIsQ0FBZDtBQUVBLGFBQU8sS0FBSyxLQUFLLFNBQVYsR0FBc0IsS0FBdEIsR0FBOEIsWUFBckM7QUFDQTs7OzRC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ZDtBQVFBLFlBQUEsS0FBSyxDQUFDLFVBQU4sQ0FBaUIsSUFBakI7QUFDQSxZQUFBLEtBQUssQ0FBQyxJQUFOO0FBQ0gsV0FiTCxFQWNLLEtBZEwsQ0FjVyxVQUFDLEdBQUQsRUFBUTtBQUNYLFlBQUEsT0FBTyxDQUFDLEtBQVIsQ0FBYywyQkFBZCxFQUEyQyxHQUFHLENBQUMsVUFBL0M7QUFDSCxXQWhCTDtBQWtCSCxTQTFCTCxFQTJCSSxLQTNCSjtBQTZCSCxPQWhDTDtBQWlDSDs7Ozs7O0FBOUNMLE9BQUEsQ0FBQSxPQUFBLEdBQUEsR0FBQTs7QUFpREEsUUFBUSxDQUFDLGtCQUFULEdBQThCLFlBQUs7QUFDL0IsTUFBSSxRQUFRLENBQUMsVUFBVCxJQUF1QixhQUEzQixFQUEwQztBQUN0QyxRQUFJLEdBQUosR0FBVSxPQUFWO0FBQ0g7QUFDSixDQUpEOzs7QUN2REEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCLvu79leHBvcnQgZGVmYXVsdCBjbGFzcyBEb21VdGlsIHtcblx0ZWxlbWVudDogRWxlbWVudDtcblx0Y29uc3RydWN0b3IoZWxlbWVudDogRWxlbWVudCkge1xuXHRcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdH1cblxuXHRnZXREYXRhQXR0cihhdHRyOiBzdHJpbmcsIGRlZmF1bHR2YWx1ZTogc3RyaW5nID0gdW5kZWZpbmVkKTogYW55IHtcblx0XHRpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuIG51bGw7XG5cdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKGBkYXRhLSR7YXR0cn1gKTtcblxuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBkZWZhdWx0dmFsdWU7XG5cdH1cblxuXHRzZXREYXRhQXR0cihhdHRyOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBhbnkge1xuXHRcdGlmICghdGhpcy5lbGVtZW50KSByZXR1cm4gbnVsbDtcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShgZGF0YS0ke2F0dHJ9YCwgdmFsdWUpO1xuXHR9XG5cblx0Z2V0QXR0cihhdHRyOiBzdHJpbmcsIGRlZmF1bHR2YWx1ZTogc3RyaW5nID0gdW5kZWZpbmVkKTogYW55IHtcblx0XHRpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuIG51bGw7XG5cdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHIpXG5cblx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDogZGVmYXVsdHZhbHVlO1xuXHR9XG5cblx0c2V0QXR0cihhdHRyOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuIG51bGw7XG5cdFx0dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7XG5cdH1cblxuXHRyZW1vdmVBdHRyKGF0dHI6IHN0cmluZyk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5lbGVtZW50KSByZXR1cm4gbnVsbDtcblx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHR9XG5cblx0aGFzQXR0cihhdHRyOiBzdHJpbmcpOiBib29sZWFuIHtcblx0XHRpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuIG51bGw7XG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoYXR0cik7XG5cdH1cblxuXHRzaGFrZSgpOiB2b2lkIHtcblx0XHR0aGlzLmFwcGVuZENsYXNzKFwic2hha2VcIik7XG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLnJlbW92ZUNsYXNzKFwic2hha2VcIik7XG5cdFx0XHQodGhpcy5lbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnJlYWRPbmx5ID0gZmFsc2U7XG5cdFx0fSwgMzAwKTtcblx0fVxuXG5cdHJlbW92ZUNsYXNzKGNsYXNzbmFtZSkge1xuXHRcdHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzbmFtZSk7XG5cdH1cblxuXHRhcHBlbmRDbGFzcyhjbGFzc25hbWUpIHtcblx0XHR0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc25hbWUpO1xuXHR9XG59XG4iLCJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEh0bWxMb2FkZXIge1xuICAgIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IocXVlcnlTdHJpbmc6IHN0cmluZykge1xuICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHF1ZXJ5U3RyaW5nKTtcbiAgICB9XG5cbiAgICBsb2FkKHVybDogc3RyaW5nLCBtZXRob2Q6IHN0cmluZyA9IFwiZ2V0XCIpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1pc3NpbmcgdGFyZ2V0IGVsZW1lbnRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB4bWxIdHRwUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgIHhtbEh0dHBSZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh4bWxIdHRwUmVxdWVzdC5yZWFkeVN0YXRlID09IDQgJiYgeG1sSHR0cFJlcXVlc3Quc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudC5pbm5lckhUTUwgPSB4bWxIdHRwUmVxdWVzdC5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgeG1sSHR0cFJlcXVlc3Qub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgICAgIHhtbEh0dHBSZXF1ZXN0LnNlbmQoKTtcbiAgICB9XG59IiwiXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWtlUmVxdWVzdCB7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdXJsOiBzdHJpbmc7XG4gICAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcsIG1ldGhvZDogc3RyaW5nID0gXCJnZXRcIikge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XG4gICAgfVxuXG4gICAgc2VuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHhtbEh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4bWxIdHRwUmVxdWVzdC5vcGVuKHRoaXMubWV0aG9kLCB0aGlzLnVybCk7XG4gICAgICAgICAgICB4bWxIdHRwUmVxdWVzdC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHhtbEh0dHBSZXF1ZXN0LnN0YXR1cyA+PSAyMDAgJiYgeG1sSHR0cFJlcXVlc3Quc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeG1sSHR0cFJlcXVlc3QucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHhtbEh0dHBSZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHhtbEh0dHBSZXF1ZXN0LnN0YXR1c1RleHRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhtbEh0dHBSZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB4bWxIdHRwUmVxdWVzdC5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHhtbEh0dHBSZXF1ZXN0LnN0YXR1c1RleHRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4bWxIdHRwUmVxdWVzdC5zZW5kKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVybFV0aWwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIHF1ZXJ5VmFsdWU6IEZ1bmN0aW9uID0gKGZpZWxkOiBzdHJpbmcsIHVybD86IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgICAgIHZhciBocmVmOiBzdHJpbmcgPSB1cmwgPyB1cmwgOiB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgICAgdmFyIHJlZzogUmVnRXhwID0gbmV3IFJlZ0V4cCgnWz8mXScgKyBmaWVsZCArICc9KFteJiNdKiknLCAnaScpO1xuICAgICAgICB2YXIgc3RyaW5nOiBzdHJpbmdbXSA9IHJlZy5leGVjKGhyZWYpO1xuICAgICAgICByZXR1cm4gc3RyaW5nID8gc3RyaW5nWzFdLnRvTG93ZXJDYXNlKCkgOiBudWxsO1xuICAgIH07XG5cbiAgICBjdXJyZW50VVJMOiBGdW5jdGlvbiA9ICgpOiBzdHJpbmcgPT4gd2luZG93LmxvY2F0aW9uLmhyZWY7XG5cbiAgICBnZXRVUkxQYXJhbWV0ZXJzOiBGdW5jdGlvbiA9ICh1cmw6IHN0cmluZyk6IGFueSA9PlxuICAgICAgICAodXJsLm1hdGNoKC8oW14/PSZdKykoPShbXiZdKikpL2cpIHx8IFtdKS5yZWR1Y2UoKGEsIHYpID0+XG4gICAgICAgICAgICAoKGFbdi5zbGljZSgwLCB2LmluZGV4T2YoXCI9XCIpKV0gPSB2LnNsaWNlKHYuaW5kZXhPZihcIj1cIikgKyAxKSksIGEpLCB7fSk7XG5cbiAgICByZWRpcmVjdDogRnVuY3Rpb24gPSAodXJsLCBhc0xpbmsgPSB0cnVlKTogdm9pZCA9PiBhc0xpbmsgPyAod2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwpIDogd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoXG4gICAgICAgIHVybCk7XG5cbiAgICBiYXNlVXJsOiBGdW5jdGlvbiA9ICgpOiBzdHJpbmcgPT4gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblxuICAgIGhvc3Q6IEZ1bmN0aW9uID0gKCk6IHN0cmluZyA9PiB3aW5kb3cubG9jYXRpb24uaG9zdDtcblxuICAgIHBhdGhBcnJheTogRnVuY3Rpb24gPSAoKTogc3RyaW5nW10gPT4gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJyk7XG59XG4iLCJpbXBvcnQgRG9tVXRpbCBmcm9tIFwiLi9VdGlsaXRpZXMvRG9tVXRpbFwiO1xuaW1wb3J0IFVybFV0aWwgZnJvbSBcIi4vVXRpbGl0aWVzL1VybFV0aWxcIjtcbmltcG9ydCBIdG1sTG9hZGVyIGZyb20gXCIuL1V0aWxpdGllcy9IdG1sTG9hZGVyXCI7XG5pbXBvcnQgKiBhcyB0aW5nbGUgZnJvbSBcInRpbmdsZS5qc1wiO1xuaW1wb3J0IE1ha2VSZXF1ZXN0IGZyb20gXCIuL1V0aWxpdGllcy9NYWtlUmVxdWVzdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIGV4ZWN1dGUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnNldExpc3RlbmVycygpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHZhciB1c2Vyc1Jvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudXNlcicpO1xuICAgICAgICBbXS5zbGljZVxuICAgICAgICAgICAgLmNhbGwodXNlcnNSb3dzKVxuICAgICAgICAgICAgLmZvckVhY2goKGVsZW1lbnQ6IEVsZW1lbnQsIGluZGV4OiBudW1iZXIsIGFycmF5OiBIVE1MRWxlbWVudFtdKSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvbVV0aWwgPSBuZXcgRG9tVXRpbChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybFV0aWwgPSBuZXcgVXJsVXRpbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gZG9tVXRpbC5nZXREYXRhQXR0cigndXNlcmlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyVXJsID0gYCR7dXJsVXRpbC5iYXNlVXJsKCl9L2FwaS9tb2RhbC91c2VyP2lkPSR7dXNlcklkfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgSHRtbExvYWRlcignI3VzZXJNb2RhbCcpLmxvYWQodXNlclVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTWFrZVJlcXVlc3QodXNlclVybClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2VuZCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgdGluZ2xlLm1vZGFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0aWNreUZvb3RlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU1ldGhvZHM6IFsnb3ZlcmxheScsICdidXR0b24nLCAnZXNjYXBlJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUxhYmVsOiBcIkNsb3NlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogWydjdXN0b20tY2xhc3MtMScsICdjdXN0b20tY2xhc3MtMiddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6ICgpID0+IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLnNldENvbnRlbnQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1Z2gsIHRoZXJlIHdhcyBhbiBlcnJvciEnLCBlcnIuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufVxuXG5kb2N1bWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gXCJpbnRlcmFjdGl2ZVwiKSB7XG4gICAgICAgIG5ldyBBcHAoKS5leGVjdXRlKCk7XG4gICAgfVxufTtcbiIsIiFmdW5jdGlvbih0LG8pe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUobyk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9bygpOnQudGluZ2xlPW8oKX0odGhpcyxmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIG89e29uQ2xvc2U6bnVsbCxvbk9wZW46bnVsbCxiZWZvcmVPcGVuOm51bGwsYmVmb3JlQ2xvc2U6bnVsbCxzdGlja3lGb290ZXI6ITEsZm9vdGVyOiExLGNzc0NsYXNzOltdLGNsb3NlTGFiZWw6XCJDbG9zZVwiLGNsb3NlTWV0aG9kczpbXCJvdmVybGF5XCIsXCJidXR0b25cIixcImVzY2FwZVwiXX07dGhpcy5vcHRzPXIoe30sbyx0KSx0aGlzLmluaXQoKX1mdW5jdGlvbiBvKCl7dGhpcy5tb2RhbEJveEZvb3RlciYmKHRoaXMubW9kYWxCb3hGb290ZXIuc3R5bGUud2lkdGg9dGhpcy5tb2RhbEJveC5jbGllbnRXaWR0aCtcInB4XCIsdGhpcy5tb2RhbEJveEZvb3Rlci5zdHlsZS5sZWZ0PXRoaXMubW9kYWxCb3gub2Zmc2V0TGVmdCtcInB4XCIpfWZ1bmN0aW9uIGUoKXt0aGlzLm1vZGFsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKFwidGluZ2xlLW1vZGFsXCIpLDAhPT10aGlzLm9wdHMuY2xvc2VNZXRob2RzLmxlbmd0aCYmLTEhPT10aGlzLm9wdHMuY2xvc2VNZXRob2RzLmluZGV4T2YoXCJvdmVybGF5XCIpfHx0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoXCJ0aW5nbGUtbW9kYWwtLW5vT3ZlcmxheUNsb3NlXCIpLHRoaXMubW9kYWwuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLm9wdHMuY3NzQ2xhc3MuZm9yRWFjaChmdW5jdGlvbih0KXtcInN0cmluZ1wiPT10eXBlb2YgdCYmdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKHQpfSx0aGlzKSwtMSE9PXRoaXMub3B0cy5jbG9zZU1ldGhvZHMuaW5kZXhPZihcImJ1dHRvblwiKSYmKHRoaXMubW9kYWxDbG9zZUJ0bj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLHRoaXMubW9kYWxDbG9zZUJ0bi50eXBlPVwiYnV0dG9uXCIsdGhpcy5tb2RhbENsb3NlQnRuLmNsYXNzTGlzdC5hZGQoXCJ0aW5nbGUtbW9kYWxfX2Nsb3NlXCIpLHRoaXMubW9kYWxDbG9zZUJ0bkljb249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksdGhpcy5tb2RhbENsb3NlQnRuSWNvbi5jbGFzc0xpc3QuYWRkKFwidGluZ2xlLW1vZGFsX19jbG9zZUljb25cIiksdGhpcy5tb2RhbENsb3NlQnRuSWNvbi5pbm5lckhUTUw9XCLDl1wiLHRoaXMubW9kYWxDbG9zZUJ0bkxhYmVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMubW9kYWxDbG9zZUJ0bkxhYmVsLmNsYXNzTGlzdC5hZGQoXCJ0aW5nbGUtbW9kYWxfX2Nsb3NlTGFiZWxcIiksdGhpcy5tb2RhbENsb3NlQnRuTGFiZWwuaW5uZXJIVE1MPXRoaXMub3B0cy5jbG9zZUxhYmVsLHRoaXMubW9kYWxDbG9zZUJ0bi5hcHBlbmRDaGlsZCh0aGlzLm1vZGFsQ2xvc2VCdG5JY29uKSx0aGlzLm1vZGFsQ2xvc2VCdG4uYXBwZW5kQ2hpbGQodGhpcy5tb2RhbENsb3NlQnRuTGFiZWwpKSx0aGlzLm1vZGFsQm94PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5tb2RhbEJveC5jbGFzc0xpc3QuYWRkKFwidGluZ2xlLW1vZGFsLWJveFwiKSx0aGlzLm1vZGFsQm94Q29udGVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMubW9kYWxCb3hDb250ZW50LmNsYXNzTGlzdC5hZGQoXCJ0aW5nbGUtbW9kYWwtYm94X19jb250ZW50XCIpLHRoaXMubW9kYWxCb3guYXBwZW5kQ2hpbGQodGhpcy5tb2RhbEJveENvbnRlbnQpLC0xIT09dGhpcy5vcHRzLmNsb3NlTWV0aG9kcy5pbmRleE9mKFwiYnV0dG9uXCIpJiZ0aGlzLm1vZGFsLmFwcGVuZENoaWxkKHRoaXMubW9kYWxDbG9zZUJ0biksdGhpcy5tb2RhbC5hcHBlbmRDaGlsZCh0aGlzLm1vZGFsQm94KX1mdW5jdGlvbiBzKCl7dGhpcy5tb2RhbEJveEZvb3Rlcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMubW9kYWxCb3hGb290ZXIuY2xhc3NMaXN0LmFkZChcInRpbmdsZS1tb2RhbC1ib3hfX2Zvb3RlclwiKSx0aGlzLm1vZGFsQm94LmFwcGVuZENoaWxkKHRoaXMubW9kYWxCb3hGb290ZXIpfWZ1bmN0aW9uIGkoKXt0aGlzLl9ldmVudHM9e2NsaWNrQ2xvc2VCdG46dGhpcy5jbG9zZS5iaW5kKHRoaXMpLGNsaWNrT3ZlcmxheTpsLmJpbmQodGhpcykscmVzaXplOnRoaXMuY2hlY2tPdmVyZmxvdy5iaW5kKHRoaXMpLGtleWJvYXJkTmF2Om4uYmluZCh0aGlzKX0sLTEhPT10aGlzLm9wdHMuY2xvc2VNZXRob2RzLmluZGV4T2YoXCJidXR0b25cIikmJnRoaXMubW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ldmVudHMuY2xpY2tDbG9zZUJ0biksdGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5fZXZlbnRzLmNsaWNrT3ZlcmxheSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9ldmVudHMucmVzaXplKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuX2V2ZW50cy5rZXlib2FyZE5hdil9ZnVuY3Rpb24gbih0KXstMSE9PXRoaXMub3B0cy5jbG9zZU1ldGhvZHMuaW5kZXhPZihcImVzY2FwZVwiKSYmMjc9PT10LndoaWNoJiZ0aGlzLmlzT3BlbigpJiZ0aGlzLmNsb3NlKCl9ZnVuY3Rpb24gbCh0KXstMSE9PXRoaXMub3B0cy5jbG9zZU1ldGhvZHMuaW5kZXhPZihcIm92ZXJsYXlcIikmJiFkKHQudGFyZ2V0LFwidGluZ2xlLW1vZGFsXCIpJiZ0LmNsaWVudFg8dGhpcy5tb2RhbC5jbGllbnRXaWR0aCYmdGhpcy5jbG9zZSgpfWZ1bmN0aW9uIGQodCxvKXtmb3IoOyh0PXQucGFyZW50RWxlbWVudCkmJiF0LmNsYXNzTGlzdC5jb250YWlucyhvKTspO3JldHVybiB0fWZ1bmN0aW9uIGEoKXstMSE9PXRoaXMub3B0cy5jbG9zZU1ldGhvZHMuaW5kZXhPZihcImJ1dHRvblwiKSYmdGhpcy5tb2RhbENsb3NlQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2V2ZW50cy5jbGlja0Nsb3NlQnRuKSx0aGlzLm1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLl9ldmVudHMuY2xpY2tPdmVybGF5KSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuX2V2ZW50cy5yZXNpemUpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcy5fZXZlbnRzLmtleWJvYXJkTmF2KX1mdW5jdGlvbiByKCl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKylmb3IodmFyIG8gaW4gYXJndW1lbnRzW3RdKWFyZ3VtZW50c1t0XS5oYXNPd25Qcm9wZXJ0eShvKSYmKGFyZ3VtZW50c1swXVtvXT1hcmd1bWVudHNbdF1bb10pO3JldHVybiBhcmd1bWVudHNbMF19dmFyIGg9ZnVuY3Rpb24oKXt2YXIgdCxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aW5nbGUtdGVzdC10cmFuc2l0aW9uXCIpLGU9e3RyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvVHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsV2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIn07Zm9yKHQgaW4gZSlpZih2b2lkIDAhPT1vLnN0eWxlW3RdKXJldHVybiBlW3RdfSgpLGM9ITE7cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtpZighdGhpcy5tb2RhbClyZXR1cm4gZS5jYWxsKHRoaXMpLGkuY2FsbCh0aGlzKSxkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZSh0aGlzLm1vZGFsLGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCksdGhpcy5vcHRzLmZvb3RlciYmdGhpcy5hZGRGb290ZXIoKSx0aGlzfSx0LnByb3RvdHlwZS5fYnVzeT1mdW5jdGlvbih0KXtjPXR9LHQucHJvdG90eXBlLl9pc0J1c3k9ZnVuY3Rpb24oKXtyZXR1cm4gY30sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe251bGwhPT10aGlzLm1vZGFsJiYodGhpcy5pc09wZW4oKSYmdGhpcy5jbG9zZSghMCksYS5jYWxsKHRoaXMpLHRoaXMubW9kYWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm1vZGFsKSx0aGlzLm1vZGFsPW51bGwpfSx0LnByb3RvdHlwZS5pc09wZW49ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMubW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGluZ2xlLW1vZGFsLS12aXNpYmxlXCIpfSx0LnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2lzQnVzeSgpKXt0aGlzLl9idXN5KCEwKTt2YXIgdD10aGlzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQub3B0cy5iZWZvcmVPcGVuJiZ0Lm9wdHMuYmVmb3JlT3BlbigpLHRoaXMubW9kYWwuc3R5bGUucmVtb3ZlUHJvcGVydHk/dGhpcy5tb2RhbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImRpc3BsYXlcIik6dGhpcy5tb2RhbC5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNwbGF5XCIpLHRoaXMuX3Njcm9sbFBvc2l0aW9uPXdpbmRvdy5wYWdlWU9mZnNldCxkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJ0aW5nbGUtZW5hYmxlZFwiKSxkb2N1bWVudC5ib2R5LnN0eWxlLnRvcD0tdGhpcy5fc2Nyb2xsUG9zaXRpb24rXCJweFwiLHRoaXMuc2V0U3RpY2t5Rm9vdGVyKHRoaXMub3B0cy5zdGlja3lGb290ZXIpLHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZChcInRpbmdsZS1tb2RhbC0tdmlzaWJsZVwiKSxoP3RoaXMubW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihoLGZ1bmN0aW9uIG8oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm9wdHMub25PcGVuJiZ0Lm9wdHMub25PcGVuLmNhbGwodCksdC5tb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKGgsbywhMSksdC5fYnVzeSghMSl9LCExKTooXCJmdW5jdGlvblwiPT10eXBlb2YgdC5vcHRzLm9uT3BlbiYmdC5vcHRzLm9uT3Blbi5jYWxsKHQpLHQuX2J1c3koITEpKSx0aGlzLmNoZWNrT3ZlcmZsb3coKSx0aGlzfX0sdC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2lzQnVzeSgpKXtpZih0aGlzLl9idXN5KCEwKSx0PXR8fCExLFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMub3B0cy5iZWZvcmVDbG9zZSl7aWYoIXRoaXMub3B0cy5iZWZvcmVDbG9zZS5jYWxsKHRoaXMpKXJldHVybn1kb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJ0aW5nbGUtZW5hYmxlZFwiKSx3aW5kb3cuc2Nyb2xsVG8oMCx0aGlzLl9zY3JvbGxQb3NpdGlvbiksZG9jdW1lbnQuYm9keS5zdHlsZS50b3A9bnVsbCx0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aW5nbGUtbW9kYWwtLXZpc2libGVcIik7dmFyIG89dGhpczt0PyhvLm1vZGFsLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsXCJmdW5jdGlvblwiPT10eXBlb2Ygby5vcHRzLm9uQ2xvc2UmJm8ub3B0cy5vbkNsb3NlLmNhbGwodGhpcyksby5fYnVzeSghMSkpOmg/dGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKGgsZnVuY3Rpb24gdCgpe28ubW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihoLHQsITEpLG8ubW9kYWwuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixcImZ1bmN0aW9uXCI9PXR5cGVvZiBvLm9wdHMub25DbG9zZSYmby5vcHRzLm9uQ2xvc2UuY2FsbCh0aGlzKSxvLl9idXN5KCExKX0sITEpOihvLm1vZGFsLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsXCJmdW5jdGlvblwiPT10eXBlb2Ygby5vcHRzLm9uQ2xvc2UmJm8ub3B0cy5vbkNsb3NlLmNhbGwodGhpcyksby5fYnVzeSghMSkpfX0sdC5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD90aGlzLm1vZGFsQm94Q29udGVudC5pbm5lckhUTUw9dDoodGhpcy5tb2RhbEJveENvbnRlbnQuaW5uZXJIVE1MPVwiXCIsdGhpcy5tb2RhbEJveENvbnRlbnQuYXBwZW5kQ2hpbGQodCkpLHRoaXMuaXNPcGVuKCkmJnRoaXMuY2hlY2tPdmVyZmxvdygpLHRoaXN9LHQucHJvdG90eXBlLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RhbEJveENvbnRlbnR9LHQucHJvdG90eXBlLmFkZEZvb3Rlcj1mdW5jdGlvbigpe3JldHVybiBzLmNhbGwodGhpcyksdGhpc30sdC5wcm90b3R5cGUuc2V0Rm9vdGVyQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tb2RhbEJveEZvb3Rlci5pbm5lckhUTUw9dCx0aGlzfSx0LnByb3RvdHlwZS5nZXRGb290ZXJDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kYWxCb3hGb290ZXJ9LHQucHJvdG90eXBlLnNldFN0aWNreUZvb3Rlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc092ZXJmbG93KCl8fCh0PSExKSx0P3RoaXMubW9kYWxCb3guY29udGFpbnModGhpcy5tb2RhbEJveEZvb3RlcikmJih0aGlzLm1vZGFsQm94LnJlbW92ZUNoaWxkKHRoaXMubW9kYWxCb3hGb290ZXIpLHRoaXMubW9kYWwuYXBwZW5kQ2hpbGQodGhpcy5tb2RhbEJveEZvb3RlciksdGhpcy5tb2RhbEJveEZvb3Rlci5jbGFzc0xpc3QuYWRkKFwidGluZ2xlLW1vZGFsLWJveF9fZm9vdGVyLS1zdGlja3lcIiksby5jYWxsKHRoaXMpLHRoaXMubW9kYWxCb3hDb250ZW50LnN0eWxlW1wicGFkZGluZy1ib3R0b21cIl09dGhpcy5tb2RhbEJveEZvb3Rlci5jbGllbnRIZWlnaHQrMjArXCJweFwiKTp0aGlzLm1vZGFsQm94Rm9vdGVyJiYodGhpcy5tb2RhbEJveC5jb250YWlucyh0aGlzLm1vZGFsQm94Rm9vdGVyKXx8KHRoaXMubW9kYWwucmVtb3ZlQ2hpbGQodGhpcy5tb2RhbEJveEZvb3RlciksdGhpcy5tb2RhbEJveC5hcHBlbmRDaGlsZCh0aGlzLm1vZGFsQm94Rm9vdGVyKSx0aGlzLm1vZGFsQm94Rm9vdGVyLnN0eWxlLndpZHRoPVwiYXV0b1wiLHRoaXMubW9kYWxCb3hGb290ZXIuc3R5bGUubGVmdD1cIlwiLHRoaXMubW9kYWxCb3hDb250ZW50LnN0eWxlW1wicGFkZGluZy1ib3R0b21cIl09XCJcIix0aGlzLm1vZGFsQm94Rm9vdGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aW5nbGUtbW9kYWwtYm94X19mb290ZXItLXN0aWNreVwiKSkpLHRoaXN9LHQucHJvdG90eXBlLmFkZEZvb3RlckJ0bj1mdW5jdGlvbih0LG8sZSl7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtyZXR1cm4gcy5pbm5lckhUTUw9dCxzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGUpLFwic3RyaW5nXCI9PXR5cGVvZiBvJiZvLmxlbmd0aCYmby5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbih0KXtzLmNsYXNzTGlzdC5hZGQodCl9KSx0aGlzLm1vZGFsQm94Rm9vdGVyLmFwcGVuZENoaWxkKHMpLHN9LHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlJlc2l6ZSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdmVyc2lvbiAxLjBcIil9LHQucHJvdG90eXBlLmlzT3ZlcmZsb3c9ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuaW5uZXJIZWlnaHQ7cmV0dXJuIHRoaXMubW9kYWxCb3guY2xpZW50SGVpZ2h0Pj10fSx0LnByb3RvdHlwZS5jaGVja092ZXJmbG93PWZ1bmN0aW9uKCl7dGhpcy5tb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0aW5nbGUtbW9kYWwtLXZpc2libGVcIikmJih0aGlzLmlzT3ZlcmZsb3coKT90aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoXCJ0aW5nbGUtbW9kYWwtLW92ZXJmbG93XCIpOnRoaXMubW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInRpbmdsZS1tb2RhbC0tb3ZlcmZsb3dcIiksIXRoaXMuaXNPdmVyZmxvdygpJiZ0aGlzLm9wdHMuc3RpY2t5Rm9vdGVyP3RoaXMuc2V0U3RpY2t5Rm9vdGVyKCExKTp0aGlzLmlzT3ZlcmZsb3coKSYmdGhpcy5vcHRzLnN0aWNreUZvb3RlciYmKG8uY2FsbCh0aGlzKSx0aGlzLnNldFN0aWNreUZvb3RlcighMCkpKX0se21vZGFsOnR9fSk7Il19"}